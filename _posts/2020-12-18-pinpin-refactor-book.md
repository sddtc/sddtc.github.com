---
title: "[读书笔记] 品品《重构》这本书嗷"
layout: post
categories: sddtc
date: "2020-12-18"
guid: urn:uuid:a93dc7db-0ac2-40c2-9980-af9d142cd8c3
tags:
  - java
---

书里首先介绍了重构这种行为朴素的优点：  

> 重构行为可以使责任的分配更为合理，使代码的维护更加轻松。 重构之后风格会迥异与过程化风格-后者也许是某些人习惯的风格。
  
接着又朴素的强调了测试的重要性，它是重构的前提。 因为测试可以帮助我们来方便的验证重构行为对功能没有产生不好的效果。
  
> 重构的节奏一般是测试，小修改，测试，小修改，测试，小修改..  

接着作者对重构进行了定义，~~太严谨了~~ 重构可以根据上下文的不同分为两种定义：  
* 名次形式： 对软件内部结构的一种调整，目的是在不改变软件可观察行为的前提下，提高其可理解性，降低其修改成本。
* 动词形式： 使用一系列重构手法，在不改变软件可观察行为的前提下，调整其结构。

重构和对程序进行性能优化是两个独立的概念，有相似性和区别:
* 相似性：他们都只会改变其内部结构。 然而对软件可观察的外部行为只造成很小变化，或甚至不造成变化（性能优化使执行速度变快）
* 区别：
  * 重构的目的是使软件更容易被理解和修改。
  * 性能优化往往使代码较难理解，但为了得到所需的性能你不得不那么做。

当你使用重构技术开发软件时，你会把自己的时间分配给两种截然不同的行为：添加新功能，以及重构。 这就是所谓的 "两顶帽子" 比喻：  
当你带上了添加新功能的 🎩，那么你就不应该修改既有代码，只管添加新功能。通过测试    
当你带上了重构的🎩， 那么你就不应该再进行和新功能有关的开发工作，只管改进程序结构  

那句话又来了  
> 重构不是所谓的"银弹" -- 然而是一把"银钳子"

如果没有重构，程序的设计会逐渐腐败变质。 当人们只为短期目的或是在完全理解整体设计之前就贸然修改代码，程序将逐渐失去自己的结构。代码结构的流失是累积性的。          
这句话让我想起来看过的一本书，图解逻辑思维什么的。 大概意思是说很多人~~理工科的~~很容易陷入局部思考而忽略整体。想了想大部分人会为了重构而重构 -- 那么就是忽视了整体设计而专注于个别变量，方法，类。 那么这样我觉得也算不上保护了设计。      

> 我不是个伟大的程序员，我只是个有着一些优秀习惯的好程序员 - [Kent Beck](https://en.wikipedia.org/wiki/Kent_Beck)  

> 计算机科学是这样一门科学： 它相信所有问题都可以通过增加一个间接层来解决 - Dennis DeBruler

这样看来我确实不会对大多数重构都为程序引入了更多间接层而惊讶。 重构往往把大型对象拆成多个小型对象，把大型函数拆成多个小型函数。 然而那句话又来了，间接层是一把双刃剑。书中列举了它的若干价值：
* 允许逻辑共享
* 分开解释意图和实现
* 隔离变化
* 封装条件逻辑

  
  

 
  



