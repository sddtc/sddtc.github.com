---
title: "[Javascript] Why typescript ?"
layout: post
categories: sddtc tech
guid: urn:uuid:75f8bea2-76fb-431d-a960-5606c368882d
tags:
  - typescript
  - javascript
---

### èƒŒæ™¯
ä½¿ç”¨ JS æœ‰ä¸€å®šæ—¶é—´äº†, æœ€è¿‘å¼€å§‹å­¦ä¹ å¹¶ä½¿ç”¨ Typescript, è€Œæˆ‘ä»¬å¯çˆ±çš„ Tomasz åˆ†äº«äº†ä¸€ä¸ªå¾ˆæ£’çš„ä¹¦, æ­£æ‰€è°“ä¸‡äº‹çš†æœ‰å› æžœ, ä»Šæ—¥å…ˆåˆ†äº«ä¸€åˆ‡çš„**å› ** ðŸŽ§ 

> Typescript æœ€ç»ˆä¼šç¼–è¯‘ä¸º Javascript, äºŽæ˜¯ç¨‹åºæ‰§è¡Œæ—¶çš„è¯­è¨€æ˜¯ Javascript (ä¸è®ºæ˜¯åœ¨æµè§ˆå™¨ç«¯äº¦æˆ–æ˜¯æœåŠ¡å™¨ç«¯).

### é‚£ä¹ˆ, ä¸ºä»€ä¹ˆè¦ç”¨ TypeScript ï¼Ÿ
TypeScript è¯­è¨€æœ‰ä¸¤ä¸ªä¸»è¦çš„ç›®æ ‡:  

* ä¸º JavaScript æä¾› **Optional** çš„ç±»åž‹ä½“ç³»
* æä¾›ä»Žæœªæ¥ JavaScript å‘è¡Œç‰ˆæœ¬åˆ°å½“å‰ JavaScript engines çš„è®¡åˆ’åŠŸèƒ½  

å¯¹ä»¥ä¸Šä¸¤ä¸ªç›®æ ‡çš„æ¸´æœ›, æ˜¯å»ºç«‹åœ¨ä»¥ä¸‹ç‰¹ç‚¹ä¹‹ä¸Š:  

### The TypeScript type system
ä¹Ÿè®¸ä½ ä¼šé—®, ä¸ºä»€ä¹ˆè¦ç»™ Javascript æ·»åŠ "ç±»åž‹" ?  

ç±»åž‹å·²ç»è¢«å¹¿æ³›è¯æ˜Žèƒ½å¤Ÿæé«˜ä»£ç è´¨é‡, å¢žå¼ºå¯é˜…è¯»æ€§. å¤§åž‹å›¢é˜Ÿ(è°·æ­Œ, å¾®è½¯, Facebook)ä¸æ–­å¾—å‡ºè¿™ä¸ªç»“è®º. ç‰¹åˆ«:  

* åœ¨è¿›è¡Œé‡æž„æ—¶, ç±»åž‹å¯ä»¥æé«˜æ‚¨çš„æ•æ·æ€§. ç¼–è¯‘å™¨æ•èŽ·é”™è¯¯æ¯”åœ¨è¿è¡Œæ—¶å¤±è´¥æ›´å¥½.
* ç±»åž‹æ˜¯æ‚¨å¯ä»¥æ‹¥æœ‰çš„æœ€ä½³æ–‡æ¡£å½¢å¼ä¹‹ä¸€. å‡½æ•°ç­¾åæ˜¯ä¸€ä¸ªå®šç†, è€Œå‡½æ•°ä½“æ˜¯è¯æ˜Ž.

ç„¶è€Œ, ç±»åž‹æœ‰ä¸€ç§ä½Žè°ƒçš„æ–¹å¼å®žçŽ°. TypeScript éžå¸¸è®²ç©¶ä¿æŒå…¥é—¨é—¨æ§›å°½å¯èƒ½ä½Ž.  

é‚£ä¹ˆæ€Žä¹ˆå®žçŽ°è¿™ä¸€ç›®æ ‡å‘¢? 

#### JavaScript å³ TypeScript
TypeScript ä¸º JavaScript ä»£ç æä¾›ç¼–è¯‘æ—¶ç±»åž‹å®‰å…¨æ€§. é‰´äºŽå®ƒçš„åå­—, è¿™å¹¶ä¸å¥‡æ€ª. æœ€æ£’çš„æ˜¯è¿™äº›ç±»åž‹æ˜¯å®Œå…¨å¯é€‰çš„. æ‚¨çš„ JavaScript ä»£ç  `.js` æ–‡ä»¶å¯ä»¥é‡å‘½åä¸º `.ts` æ–‡ä»¶, TypeScript ä»ç„¶ä¼šè¿”å›žä¸ŽåŽŸå§‹ JavaScript æ–‡ä»¶ç­‰æ•ˆçš„æœ‰æ•ˆ `.js` æ–‡ä»¶. TypeScript æ˜¯æœ‰æ„ä¸”ä¸¥æ ¼åœ°æ˜¯ JavaScript çš„è¶…é›†, å…·æœ‰å¯é€‰çš„ç±»åž‹æ£€æŸ¥.

#### ç±»åž‹å¯ä»¥æ˜¯éšå¼çš„
TypeScript å°†å°è¯•å°½å¯èƒ½å¤šåœ°æŽ¨æ–­å‡ºç±»åž‹ä¿¡æ¯, ä»¥ä¾¿åœ¨ä»£ç å¼€å‘è¿‡ç¨‹ä¸­ä»¥æœ€å°çš„ç”Ÿäº§æˆæœ¬ä¸ºæ‚¨æä¾›ç±»åž‹å®‰å…¨æ€§. ä¾‹å¦‚, åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­, TypeScript æŽ¨æ–­å‡º `foo` çš„ç±»åž‹æ˜¯ `number`, å¹¶å°†åœ¨ç¬¬äºŒè¡Œæ˜¾ç¤ºé”™è¯¯, å¦‚ä¸‹æ‰€ç¤º:  

~~~javascript
var foo = 123;
foo = '456'; // Error: cannot assign `string` to `number`

// Is foo a number or a string?
~~~

è¿™ç§ç±»åž‹æŽ¨æ–­å¾ˆæœ‰ç”¨. å¦‚æžœæ‚¨è¿è¡Œä»¥ä¸Šä»£ç , åˆ™åœ¨ä»£ç å…¶ä»–éƒ¨åˆ†, æ‚¨æ— æ³•ç¡®å®š `foo` åˆ°åº•æ˜¯æ•°å­—ç±»åž‹è¿˜æ˜¯å­—ç¬¦ä¸²ç±»åž‹. è¿™äº›é—®é¢˜ç»å¸¸å‡ºçŽ°åœ¨å¤§åž‹ä»£ç åº“é‡Œ. æˆ‘ä»¬ç¨åŽå°†æ·±å…¥æŽ¢è®¨ç±»åž‹æŽ¨æ–­è§„åˆ™.  

#### ç±»åž‹å¯ä»¥æ˜¯æ˜¾å¼çš„
æ­£å¦‚æˆ‘ä»¬ä¹‹å‰æåˆ°çš„, TypeScript ä¼šå°½å¯èƒ½å®‰å…¨åœ°æŽ¨æ–­, ä½†æ˜¯æ‚¨å¯ä»¥æ˜¾å¼çš„æŒ‡å®šç±»åž‹:
 
1. å¸®åŠ©ç¼–è¯‘å™¨è¯†åˆ«ç±»åž‹, æ›´é‡è¦çš„æ˜¯ä¸ºä¸‹ä¸€ä¸ªå¿…é¡»é˜…è¯»ä»£ç çš„å¼€å‘äººå‘˜æä¾›æ›´å¤šçš„ä¿¡æ¯(å¯èƒ½æ˜¯æœªæ¥çš„ä½ ï¼ï¼‰
2. å¼ºåˆ¶æ‰§è¡Œç¼–è¯‘å™¨çœ‹åˆ°çš„å†…å®¹, å°±æ˜¯æ‚¨è®¤ä¸ºåº”è¯¥çœ‹åˆ°çš„å†…å®¹.  è¿™å°±æ˜¯æ‚¨å¯¹ä»£ç çš„ç†è§£ä¸Žä»£ç çš„ç®—æ³•åˆ†æž(ç”±ç¼–è¯‘å™¨å®Œæˆ)ç›¸åŒ¹é….  

TypeScript ä½¿ç”¨åŽç¼€ç±»åž‹æ³¨é‡Š.  

```javascript
var foo: number = 123;

var foo: number = '123'; // Error: cannot assign a `string` to a `number`
```

#### ç±»åž‹æ˜¯ç»“æž„åž‹çš„
åœ¨æŸäº›è¯­è¨€ä¸­, é™æ€ç±»åž‹ä¼šå¼ºè¿«ä½ åšæ²¡æœ‰å¿…è¦çš„å®šä¹‰, å³ä½¿æ‚¨çŸ¥é“ä»£ç å¯ä»¥æ­£å¸¸å·¥ä½œ, è¯­è¨€è¯­ä¹‰ä¹Ÿä¼šè¿«ä½¿æ‚¨å¤åˆ¶å†…å®¹. åœ¨ TypeScript ä¸­, å› ä¸ºæˆ‘ä»¬å¸Œæœ›å®ƒå¯¹äºŽå…·æœ‰æœ€å°è®¤çŸ¥è¿‡è½½çš„ JavaScript å¼€å‘äººå‘˜æ¥è¯´å¾ˆå®¹æ˜“, æ‰€ä»¥ç±»åž‹æ˜¯ç»“æž„æ€§çš„. ä¾‹å¦‚: 

```javascript
interface Point2D {
    x: number;
    y: number;
}
interface Point3D {
    x: number;
    y: number;
    z: number;
}
var point2D: Point2D = { x: 0, y: 10 }
var point3D: Point3D = { x: 0, y: 10, z: 20 }
function iTakePoint2D(point: Point2D) { /* do something */ }

iTakePoint2D(point2D); // exact match okay
iTakePoint2D(point3D); // extra information okay
iTakePoint2D({ x: 0 }); // Error: missing information `y`
```

#### ç±»åž‹é”™è¯¯ä¸ä¼šé˜»å¡ž JavaScript
ä¸ºäº†ä¾¿äºŽæ‚¨å°† JavaScript ä»£ç è¿ç§»åˆ° TypeScript, å³ä½¿å­˜åœ¨ç¼–è¯‘é”™è¯¯, é»˜è®¤æƒ…å†µä¸‹ TypeScript ä¹Ÿä¼šå°½å¯èƒ½åœ°ç¼–è¯‘ä¸ºæœ‰æ•ˆçš„ JavaScript. ä¾‹å¦‚:  

```javascript
var foo = 123;
foo = '456'; // Error: cannot assign a `string` to a `number`
```

ä¹Ÿä¼šè¢«ç¼–è¯‘ä¸º:  

```javascript
var foo = 123;
foo = '456';
```

å› æ­¤, æ‚¨å¯ä»¥å°† JavaScript ä»£ç é€æ­¥å‡çº§ä¸º TypeScript. è¿™ä¸Žå…¶ä»–è¯­è¨€ç¼–è¯‘å™¨çš„å·¥ä½œæ–¹å¼æœ‰å¾ˆå¤§ä¸åŒ, ä¹Ÿæ˜¯è½¬å‘ TypeScript çš„å¦ä¸€ä¸ªåŽŸå› .  

#### ç±»åž‹å¯ä»¥æ˜¯ ambient çš„
TypeScript çš„ä¸»è¦è®¾è®¡ç›®æ ‡æ˜¯ä½¿æ‚¨èƒ½å¤Ÿå®‰å…¨ã€ è½»æ¾åœ°ä½¿ç”¨ TypeScript ä¸­çš„çŽ°æœ‰ JavaScript åº“. TypeScript é€šè¿‡ `declaration` æ¥åšåˆ°è¿™ä¸€ç‚¹. TypeScript ä¸ºæ‚¨æä¾›äº†ä¸€ä¸ª `sliding scale`, è¡¨æ˜Žæ‚¨å¸Œæœ›åœ¨ `declaration` ä¸­æŠ•å…¥å¤šå°‘, æ‚¨ä»˜å‡ºçš„åŠªåŠ›è¶Šå¤š, æ‚¨èŽ·å¾—çš„ç±»åž‹å®‰å…¨ + ä»£ç å°±è¶Šå¤š. è¯·æ³¨æ„, å¤§å¤šæ•°æµè¡Œçš„ JavaScript åº“çš„å®šä¹‰å·²ç»ç”± DefinitelyTyped ç¤¾åŒºä¸ºæ‚¨ç¼–å†™, å› æ­¤å¯¹äºŽå¤§å¤šæ•°ç”¨é€”:  

1. å®šä¹‰æ–‡ä»¶å·²å­˜åœ¨.
2. æˆ–è€…è‡³å°‘, æ‚¨å·²ç»æ‹¥æœ‰å¤§é‡ç»è¿‡æ·±æ€ç†Ÿè™‘çš„ TypeScript å£°æ˜Žæ¨¡æ¿åˆ—è¡¨.

ä½œä¸ºå¦‚ä½•ç¼–å†™è‡ªå·±çš„å£°æ˜Žæ–‡ä»¶çš„å¿«é€Ÿç¤ºä¾‹, è¯·è€ƒè™‘ `jquery` çš„ä¸€ä¸ªç®€å•ç¤ºä¾‹. é»˜è®¤æƒ…å†µä¸‹(æ­£å¦‚é¢„æœŸçš„è‰¯å¥½ JS ä»£ç ). TypeScript è¦æ±‚æ‚¨åœ¨ä½¿ç”¨å˜é‡ä¹‹å‰å£°æ˜Ž(å³åœ¨æŸå¤„ä½¿ç”¨ `var`):

```javascript
$('.awesome').show(); // Error: cannot find name `$`
```

è‹¥è¦å¿«é€Ÿä¿®å¤, ä½ å¯ä»¥å‘Šè¯‰ TypeScript ç¡®å®žå­˜åœ¨ä¸€ä¸ªåä¸º `$` çš„ä¸œè¥¿: 

```javascript
declare var $: any;
$('.awesome').show(); // Okay!
```

å¦‚æžœæ‚¨æ„¿æ„, å¯ä»¥åŸºäºŽæ­¤åŸºæœ¬å®šä¹‰æž„å»ºå¹¶æä¾›æ›´å¤šä¿¡æ¯ä»¥å¸®åŠ©ä¿æŠ¤æ‚¨å…å—é”™è¯¯çš„å½±å“:  

```javascript
declare var $: {
    (selector:string): any;
};
$('.awesome').show(); // Okay!
$(123).show(); // Error: selector needs to be a string
```

#### Future JavaScript => Now
TypeScript æä¾›äº†è®¸å¤šé’ˆå¯¹å½“å‰ JavaScript å¼•æ“Ž(ä»…æ”¯æŒ `ES5` ç­‰)åœ¨ `ES6` ä¸­è§„åˆ’çš„åŠŸèƒ½. `The typescript team` æ­£åœ¨ç§¯æžåœ°æ·»åŠ è¿™äº›åŠŸèƒ½, è¿™ä¸ªåˆ—è¡¨åªä¼šéšç€æ—¶é—´çš„æŽ¨ç§»è€Œå˜å¤§, æˆ‘ä»¬å°†åœ¨å…¶è‡ªå·±çš„éƒ¨åˆ†ä¸­ä»‹ç». ä¸€ä¸ªå…³äºŽ `class` çš„ç¤ºä¾‹:   

```javascript
class Point {
    constructor(public x: number, public y: number) {
    }
    add(point: Point) {
        return new Point(this.x + point.x, this.y + point.y);
    }
}

var p1 = new Point(0, 10);
var p2 = new Point(10, 20);
var p3 = p1.add(p2); // { x: 10, y: 30 }
```

å¯çˆ±çš„æ©˜çŒ«èˆ¬çš„ `=> ` åŠŸèƒ½ï¼š

```javascript

var inc = x => x+1;
```

è¯‘è‡ª:   
[basarat.gitbooks.io/typescript](https://basarat.gitbooks.io/typescript/content/docs/why-typescript.html)

